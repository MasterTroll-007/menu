<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Detail ingredience</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
            crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
          rel="stylesheet">

</head>
<body>
<div th:insert="navbar :: navbar"></div>
<div id="ingredients-bg"></div>

<form method="post" th:object="${ingredient}">
    <form method="post" th:object="${ingredient}">
        <div class="container-fluid col-8 opacity-75 bg-dark">
            <table class="mt-5 table table-sm table-striped table-hover table-dark" style="margin-bottom: 0;">
                <thead>
                <tr>
                    <th class="text-center" colspan="5">
                        (hodnoty na 100g)
                    </th>
                </tr>
                <tr>
                    <th class="text-center col-2">
                        Název
                    </th>
                    <th class="text-center col-1">
                        Proteiny
                    </th>
                    <th class="text-center col-1">
                        Sacharidy
                    </th>
                    <th class="text-center col-1">
                        Tuky
                    </th>
                    <th class="text-center col-1">
                        Vláknina
                    </th>
                    <th class="text-center col-1">
                        kJ
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="text-center align-middle">
                        <input th:field="${ingredient.name}" id="name" type="text" class="form-control">
                    </td>
                    <td class="text-center align-middle">
                        <input oninput="calculateKJ()" th:field="${ingredient.proteins}" id="proteins" type="number" class="form-control">
                    </td>
                    <td class="text-center align-middle">
                        <input oninput="calculateKJ()" th:field="${ingredient.carbohydrates}" id="carbohydrates" type="number"
                               class="form-control">
                    </td>
                    <td class="text-center align-middle">
                        <input oninput="calculateKJ()" th:field="${ingredient.fats}" id="fats" type="number" class="form-control">
                    </td>
                    <td class="text-center align-middle">
                        <input th:field="${ingredient.fibre}" id="fibre" type="number" class="form-control">
                    </td>
                    <td class="text-center align-middle">
                        <input th:field="${ingredient.kJ}" id="kJ" type="number" class="form-control">
                    </td>
                </tr>
                </tbody>
            </table>
            <button type="submit" class="blue mt-3 mb-3 btn btn-primary">Uložit</button>
        </div>
    </form>
</form>

<script>
    function calculateKJ(){
        let carbs = $('#carbohydrates').val();
        let proteins = $('#proteins').val();
        let fats = $('#fats').val();
        $('#kJ').val(Math.round((carbs * 17 + proteins * 17) + (fats * 38)));
    }

    $(document).ready(function () {
        let carbs = $('#carbohydrates').val();
        let proteins = $('#proteins').val();
        let fats = $('#fats').val();
        $('#overallKj').val(Math.round((carbs * 17 + proteins * 17) + (fats * 38)));
    });
</script>

</body>
</html>